/*global WorldCupBracket, Backbone*/

WorldCupBracket.Collections = WorldCupBracket.Collections || {};

(function() {
	'use strict';

	var groupMatches = {
		'A': [
			[
				[0, 1], '06/12/2014 22:00', '07'
			],
			[
				[2, 3], '06/13/2014 18:00', '02'
			],
			[
				[0, 2], '06/17/2014 21:00', '01'
			],
			[
				[3, 1], '06/18/2014 18:00', '12'
			],
			[
				[3, 0], '06/23/2014 22:00', '10'
			],
			[
				[1, 2], '06/23/2014 22:00', '03'
			]
		],
		'B': [
			[
				[0, 1], '06/13/2014 21:00', '04'
			],
			[
				[2, 3], '06/14/2014 00:00', '11'
			],
			[
				[3, 1], '06/18/2014 18:00', '09'
			],
			[
				[0, 2], '06/18/2014 21:00', '06'
			],
			[
				[3, 0], '06/23/2014 18:00', '08'
			],
			[
				[1, 2], '06/23/2014 18:00', '07'
			]
		],
		'C': [
			[
				[0, 1], '06/14/2014 18:00', '05'
			],
			[
				[2, 3], '06/15/2014 03:00', '03'
			],
			[
				[0, 2], '06/19/2014 18:00', '10'
			],
			[
				[3, 1], '06/20/2014 00:00', '02'
			],
			[
				[3, 0], '06/24/2014 22:00', '11'
			],
			[
				[1, 2], '06/24/2014 22:00', '01'
			]
		],
		'D': [
			[
				[0, 1], '06/14/2014 21:00', '01'
			],
			[
				[2, 3], '06/15/2014 00:00', '12'
			],
			[
				[0, 2], '06/19/2014 21:00', '07'
			],
			[
				[3, 1], '06/20/2014 18:00', '03'
			],
			[
				[3, 0], '06/24/2014 18:00', '02'
			],
			[
				[1, 2], '06/24/2014 18:00', '05'
			]
		],
		'E': [
			[
				[0, 1], '06/15/2014 18:00', '10'
			],
			[
				[2, 3], '06/15/2014 21:00', '09'
			],
			[
				[0, 2], '06/20/2014 21:00', '04'
			],
			[
				[3, 1], '06/21/2014 00:00', '08'
			],
			[
				[3, 0], '06/25/2014 22:00', '12'
			],
			[
				[1, 2], '06/25/2014 22:00', '06'
			]
		],
		'F': [
			[
				[0, 1], '06/16/2014 00:00', '06'
			],
			[
				[2, 3], '06/16/2014 21:00', '08'
			],
			[
				[0, 2], '06/21/2014 18:00', '05'
			],
			[
				[3, 1], '06/22/2014 00:00', '11'
			],
			[
				[3, 0], '06/25/2014 18:00', '09'
			],
			[
				[1, 2], '06/25/2014 18:00', '04'
			]
		],
		'G': [
			[
				[0, 1], '06/16/2014 18:00', '04'
			],
			[
				[2, 3], '06/17/2014 00:00', '02'
			],
			[
				[0, 2], '06/21/2014 21:00', '01'
			],
			[
				[3, 1], '06/23/2014 00:00', '12'
			],
			[
				[3, 0], '06/26/2014 18:00', '03'
			],
			[
				[1, 2], '06/26/2014 18:00', '10'
			]
		],
		'H': [
			[
				[0, 1], '06/17/2014 18:00', '05'
			],
			[
				[2, 3], '06/18/2014 00:00', '11'
			],
			[
				[0, 2], '06/22/2014 18:00', '06'
			],
			[
				[3, 1], '06/22/2014 21:00', '09'
			],
			[
				[3, 0], '06/26/2014 22:00', '07'
			],
			[
				[1, 2], '06/26/2014 22:00', '08'
			]
		]
	}

	var Match = WorldCupBracket.Collections.Match = Backbone.Collection.extend({

		model: WorldCupBracket.Models.Match

	});

	WorldCupBracket.Collections.Match.forGroup = function(id, teams) {
		var collection = new Match();
		groupMatches[id].forEach(function(match, index) {
			collection.add({
				id: id + index,
				home: teams.at(match[0][0]).id,
				guest: teams.at(match[0][1]).id,
				date: new Date(match[1]),
				stadium: match[2]
			})
		});
		return collection;
	};

	WorldCupBracket.Collections.Match.bestOf16 = function() {
		var collection = new Match();
		[['a', 'b'], ['c', 'd'], ['e', 'f'], ['g', 'h']].forEach(function(teams) {
			collection.add({
				id: teams[0] + '-' + teams[1],
				home: teams[0].toUpperCase() + '1',
				guest: teams[1].toUpperCase() + '2'
			});
			collection.add({
				id: teams[1] + '-' + teams[0],
				home: teams[1].toUpperCase() + '1',
				guest: teams[0].toUpperCase() + '2'
			})
		});
		return collection;
	};

})();
